"use strict";(self.webpackChunkrestoresa_app=self.webpackChunkrestoresa_app||[]).push([[358],{9248:function(n,e,r){var t=r(1413),s=r(5987),i=r(2791),o=r(2478),a=r(184),u=["label","changeField","onChangeFieldClick","wrong"],c=(0,i.forwardRef)((function(n,e){var r=n.label,i=n.changeField,c=n.onChangeFieldClick,l=n.wrong,d=(0,s.Z)(n,u);return(0,a.jsxs)(o.W2,{children:[r?(0,a.jsx)(o.__,{children:r}):null,(0,a.jsx)(o.UP,(0,t.Z)({wrong:l,ref:e},d)),i?(0,a.jsx)(o.If,{onClick:c,children:i}):null]})}));e.Z=c},2478:function(n,e,r){r.d(e,{If:function(){return x},UP:function(){return p},W2:function(){return d},__:function(){return f}});var t,s,i,o,a,u=r(168),c=r(7691),l=r(4053),d=c.ZP.div(t||(t=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 5px;\n"]))),f=c.ZP.label(s||(s=(0,u.Z)(["\n  color: ",";\n  font-size: 14px;\n  font-weight: 500;\n"])),l.eE),p=c.ZP.input(i||(i=(0,u.Z)(["\n  height: 35px;\n  width: 100%;\n  border: 1px solid ",";\n  border-radius: 10px;\n  padding: 0 10px;\n  font-size: 12px;\n  outline: none;\n  ","\n"])),l.Am,(function(n){return n.wrong&&(0,c.iv)(o||(o=(0,u.Z)(["\n      border: 1px solid #fa5729;\n    "])))})),x=c.ZP.p(a||(a=(0,u.Z)(["\n  font-size: 14px;\n  color: #334ccf;\n  cursor: pointer;\n"])))},8358:function(n,e,r){r.r(e),r.d(e,{default:function(){return en}});var t,s,i,o,a,u,c,l,d,f,p,x=r(9439),h=r(2791),w=r(2426),m=r.n(w),v=r(4053),Z=r(689),b=r(9434),g=r(9248),y=r(6536),P=r(8484),j=r(4285),k=r(168),N=r(7691),C=N.ZP.div(t||(t=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  padding-top: 80px;\n"]))),E=(N.ZP.p(s||(s=(0,k.Z)(["\n  font-size: 14px;\n  color: #334ccf;\n  cursor: pointer;\n"]))),N.ZP.span(i||(i=(0,k.Z)(["\n  color: green;\n"])))),F=N.ZP.div(o||(o=(0,k.Z)(["\n  background-color: #fbf6f6;\n  border-radius: 10px;\n  padding: 10px;\n  cursor: pointer;\n  width: 100%;\n"]))),U=N.ZP.div(a||(a=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  min-width: 250px;\n"]))),S=(0,N.ZP)(v.uS)(u||(u=(0,k.Z)(["\n  font-size: 12px;\n"]))),_=(0,N.ZP)(v.Lf)(c||(c=(0,k.Z)(["\n  align-items: flex-start;\n  ","\n"])),(function(n){var e=n.screen;return("sm"===e||"xs"===e)&&(0,N.iv)(l||(l=(0,k.Z)(["\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      ","{\n        min-width: 300px;\n      }\n    "])),U)})),H=r(432),z=r(7689),R=r(2478),J=r(1413),q=r(1134),I=r(3791),M=r(5001),V=N.ZP.div(d||(d=(0,k.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: calc(100vw);\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),G=(0,N.ZP)(M.E.div)(f||(f=(0,k.Z)(["\n  background-color: #fff;\n  border-radius: 10px;\n  width: 350px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),Q=N.ZP.div(p||(p=(0,k.Z)(["\n  font-size: 22px;\n  color: ",";\n  font-weight: 700;\n  margin-bottom: 20px;\n"])),v.eE),T=r(6309),X=r(8740),Y=r(1804),B=r(184);var D,K,W,A=function(){var n,e,r,t=(0,q.cI)(),s=t.setValue,i=t.register,o=t.formState.errors,a=t.handleSubmit,u=t.getValues,c=t.watch,l=(0,b.I0)(),d=(0,b.v9)(Z._F),f=(0,b.v9)(Z.rK),p=(0,b.v9)(P.dp),x=p.message,w=p.isSuccess,m=p.isPending;return(0,h.useEffect)((function(){!m&&w?(l((0,y.dH)(!0)),Y.Z.alert(x).then((function(){l((0,X.Cy)()),s("currentPassword",""),s("newPassword",""),s("repeatNewPassword",""),l((0,y.dH)(!1))}))):m||!1!==w||(l((0,y.dH)(!0)),Y.Z.alert(x).then((function(){l((0,X.Cy)()),s("newPassword",""),s("repeatNewPassword",""),setTimeout((function(){l((0,y.dH)(!1))}),100)})))}),[w,m]),(0,h.useEffect)((function(){return document.body.style.overflow=f?"hidden":"unset",function(){document.body.style.overflow="unset"}}),[f]),(0,h.useEffect)((function(){return function(){l((0,X.Cy)())}}),[]),(0,B.jsx)(I.M,{children:f?(0,B.jsx)(V,{children:(0,B.jsx)(T.Z,{callback:function(){return l((0,y.m_)(!1)),void l((0,X.Cy)())},children:(0,B.jsxs)(G,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},children:[(0,B.jsx)(Q,{children:"Change Password"}),(0,B.jsxs)(v.l0,{inheritWidth:!0,screen:d,onSubmit:a((function(n){var e=u(),r=e.currentPassword,t=e.newPassword;l((0,X.I)({currentPassword:r,newPassword:t}))})),children:[(0,B.jsxs)(v.lU,{placeGap:"10px",style:{marginBottom:"25px"},children:[(0,B.jsx)(g.Z,(0,J.Z)({wrong:!1===w,type:"password",label:"Current Password",name:"currentPassword",onChange:function(n){return s("currentPassword",n.target.value)}},i("currentPassword",{required:"Current password is required."}))),(0,B.jsx)(v.y,{children:null===(n=o.currentPassword)||void 0===n?void 0:n.message}),(0,B.jsx)(g.Z,(0,J.Z)({type:"password",name:"newPassword",label:"New Password",onChange:function(n){return s("newPassword",n.target.value)}},i("newPassword",{required:"New password is required."}))),(0,B.jsx)(v.y,{children:null===(e=o.newPassword)||void 0===e?void 0:e.message}),(0,B.jsx)(g.Z,(0,J.Z)({type:"password",name:"repeatNewPassword",label:"Repeat New Password",onChange:function(n){return s("repeatNewPassword",n.target.value)}},i("repeatNewPassword",{required:"Repeat new password is required.",validate:function(n){if(c("newPassword")!==n)return"Your new passwords do not match"}}))),(0,B.jsx)(v.y,{children:null===(r=o.repeatNewPassword)||void 0===r?void 0:r.message})]}),(0,B.jsx)(v.KM,{disabled:m,type:"submit",children:x||"Change Password"})]})]})})}):null})},O=N.ZP.div(D||(D=(0,k.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: calc(100vw);\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),L=(0,N.ZP)(M.E.div)(K||(K=(0,k.Z)(["\n  background-color: #fff;\n  border-radius: 10px;\n  width: 350px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),$=N.ZP.div(W||(W=(0,k.Z)(["\n  font-size: 22px;\n  color: ",";\n  font-weight: 700;\n  margin-bottom: 20px;\n"])),v.eE);var nn=function(){var n,e=(0,q.cI)(),r=e.setValue,t=e.register,s=e.formState.errors,i=e.handleSubmit,o=e.getValues,a=(0,b.I0)(),u=(0,b.v9)(Z._F),c=(0,b.v9)(Z.oy),l=(0,b.v9)(P.HF),d=(0,b.v9)(P.qJ),f=d.message,p=d.isSuccess,x=d.isPending;return(0,h.useEffect)((function(){return document.body.style.overflow=c?"hidden":"unset",function(){document.body.style.overflow="unset"}}),[c]),(0,h.useEffect)((function(){!x&&p?(a((0,y.dH)(!0)),Y.Z.alert(f).then((function(){a((0,X.XR)()),r("newPhoneNumber",""),a((0,y.dH)(!1))}))):x||!1!==p||(a((0,y.dH)(!0)),Y.Z.alert(f).then((function(){a((0,X.XR)()),r("newPhoneNumber",""),setTimeout((function(){a((0,y.dH)(!1))}),100)})))}),[p,x]),(0,B.jsx)(I.M,{children:c?(0,B.jsx)(O,{children:(0,B.jsx)(T.Z,{callback:function(){return a((0,y.VU)(!1))},children:(0,B.jsxs)(L,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},children:[(0,B.jsx)($,{children:"Change Phone number"}),(0,B.jsxs)(v.l0,{inheritWidth:!0,screen:u,onSubmit:i((function(n){var e=o().newPhoneNumber;a((0,X.ZH)(e))})),children:[(0,B.jsxs)(v.lU,{placeGap:"10px",style:{marginBottom:"25px"},children:[(0,B.jsx)(g.Z,{type:"text",label:"Current Phone number",name:"currentPhoneNumber",disabled:!0,value:(null===l||void 0===l?void 0:l.phoneNumber)||"No number specified."}),(0,B.jsx)(g.Z,(0,J.Z)({type:"text",name:"newPhoneNumber",label:"New Phone Number",onChange:function(n){return r("newPhoneNumber",n.target.value)}},t("newPhoneNumber",{required:"New Phone number should be specified."}))),(0,B.jsx)(v.y,{children:null===(n=s.newPhoneNumber)||void 0===n?void 0:n.message})]}),(0,B.jsx)(v.KM,{type:"submit",children:"Change Phone number"})]})]})})}):null})};var en=function(){var n,e=(0,b.v9)(Z._F),r=(0,b.v9)(P.HF),t=(0,j.y)(r.uid),s=(0,h.useState)([]),i=(0,x.Z)(s,2),o=i[0],a=i[1],u=(0,b.I0)(),c=(0,z.s0)();return(0,h.useEffect)((function(){t.then((function(n){return a(n)}))}),[t]),(0,B.jsxs)(v.kz,{screen:e,children:[(0,B.jsxs)(C,{children:[(0,B.jsxs)(v.z,{style:{marginBottom:"35px"},children:["Hello, ",null===r||void 0===r||null===(n=r.fullName)||void 0===n?void 0:n.split(" ")[0]]}),(0,B.jsxs)(_,{screen:e,justify:"center",gap:(0,H.U)(e,"lg")?"40px":"100px",children:[(0,B.jsx)(U,{children:(0,B.jsxs)(v.lU,{placeGap:"15px",children:[(0,B.jsx)(g.Z,{disabled:!0,type:"text",value:null===r||void 0===r?void 0:r.fullName,label:"Full name",name:"fullName"}),(0,B.jsx)(g.Z,{disabled:!0,type:"text",value:null===r||void 0===r?void 0:r.email,label:"Email",name:"email"}),(0,B.jsx)(g.Z,{disabled:!0,value:"123456789",type:"password",label:"Password",name:"password",changeField:"Change Password",onChangeFieldClick:function(){return u((0,y.m_)(!0))}}),(0,B.jsx)(g.Z,{disabled:!0,type:"text",value:null===r||void 0===r?void 0:r.phoneNumber,label:"Phone Number",name:"phoneNumber",changeField:"Change Number",onChangeFieldClick:function(){return u((0,y.VU)(!0))}})]})}),(0,B.jsxs)(U,{children:[(0,B.jsx)(v.lU,{children:(0,B.jsx)(R.__,{children:"Orders history"})}),o.length>0?(0,B.jsx)(B.Fragment,{children:o.map((function(n){var e=n.date,r=n.hour,t=n.id,s=n.payment.status;return(0,B.jsx)(F,{onClick:function(){return c("/order/".concat(t))},children:(0,B.jsxs)(v.Lf,{justify:"flex-start",gap:"20px",children:[(0,B.jsxs)(v.lU,{placeGap:"5px",justify:"flex-start",children:[(0,B.jsxs)(S,{style:{fontSize:"12px"},children:["ORDER NUMBER ",(0,B.jsx)(E,{children:s})]}),(0,B.jsx)(v.RQ,{children:t})]}),(0,B.jsxs)(v.lU,{placeGap:"5px",children:[(0,B.jsx)(v.RQ,{children:m()(e).format("Do MMM YYYY")}),(0,B.jsxs)(S,{children:[r.hour,":",r.minute,"0"]})]})]})})}))}):(0,B.jsx)(S,{children:"No current history."})]})]})]}),(0,B.jsx)(A,{}),(0,B.jsx)(nn,{})]})}},2794:function(n,e,r){r.d(e,{OX:function(){return c},XF:function(){return l},xJ:function(){return d}});var t=r(4165),s=r(3433),i=r(1413),o=r(5861),a=r(2481),u=r(673),c=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e,r,o){var c,l,d,f,p;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=(0,a.hJ)(u.db,"users"),l=(0,a.JU)(u.db,"users",e),n.next=4,(0,a.QT)(l);case 4:if(d=n.sent,r=(0,i.Z)((0,i.Z)({},r),{},{createdAt:a.EK.fromDate(new Date),payment:o}),!d.exists()){n.next=12;break}return f=d.data(),p=f.orders,n.next=10,(0,a.pl)((0,a.JU)(c,e),(0,i.Z)((0,i.Z)({},d.data()),{},{orders:[].concat((0,s.Z)(p),[r])}));case 10:n.next=14;break;case 12:return n.next=14,(0,a.pl)((0,a.JU)(c,e),(0,i.Z)((0,i.Z)({},d.data()),{},{orders:[r]}));case 14:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),l=function(n){return new Promise(function(){var e=(0,o.Z)((0,t.Z)().mark((function e(r,s){var i,o,c,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,a.JU)(u.db,"users",n),e.next=4,(0,a.QT)(i);case 4:(o=e.sent).exists()?(c=o.data(),l=c.orders,r(l)):r([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,r){return e.apply(this,arguments)}}())},d=function(n,e){return new Promise(function(){var r=(0,o.Z)((0,t.Z)().mark((function r(s,i){var o,c,l,d,f;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=(0,a.JU)(u.db,"users",n),r.next=4,(0,a.QT)(o);case 4:(c=r.sent).exists()?(l=c.data(),d=l.orders,f=d.find((function(n){return n.id===e})),s(f)):s([]),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),i(r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(n,e){return r.apply(this,arguments)}}())}},4285:function(n,e,r){r.d(e,{A:function(){return c},y:function(){return u}});var t=r(4165),s=r(9439),i=r(5861),o=r(2791),a=r(2794),u=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){var r,u,c,l,d;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.useState)([]),u=(0,s.Z)(r,2),c=u[0],l=u[1],(0,o.useEffect)((function(){d().then((function(n){return l(n[0])}))}),[e]),d=function(){return new Promise(function(){var n=(0,i.Z)((0,t.Z)().mark((function n(r,s){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([(0,a.XF)(e)]).then((function(n){return n}));case 3:i=n.sent,r(i),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,r){return n.apply(this,arguments)}}())},n.abrupt("return",c);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e,r){var u,c,l,d,f;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=(0,o.useState)({}),c=(0,s.Z)(u,2),l=c[0],d=c[1],(0,o.useEffect)((function(){e&&r&&f().then((function(n){d(n[0])}))}),[e,r]),f=function(){return new Promise(function(){var n=(0,i.Z)((0,t.Z)().mark((function n(s,i){var o;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([(0,a.xJ)(e,r)]).then((function(n){return n}));case 3:o=n.sent,s(o),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,r){return n.apply(this,arguments)}}())},n.abrupt("return",l);case 4:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}()}}]);
//# sourceMappingURL=358.f3cac24c.chunk.js.map