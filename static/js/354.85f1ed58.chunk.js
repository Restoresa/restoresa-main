"use strict";(self.webpackChunkrestoresa_app=self.webpackChunkrestoresa_app||[]).push([[354],{3354:function(e,n,t){t.r(n);var r=t(1413),s=t(9439),a=t(2791),i=t(4261),c=t(4053),u=t(2226),o=t(5764),f=t(9699),d=t(9434),p=t(5960),l=t(8484),x=t(6162),m=t(7689),h=t(3197),Z=t(3473),g=t(5238),v=t(2426),y=t.n(v),j=t(2794),w=t(184),b=(0,Z.J)(h.Z.StripePublishableKey),P=function(e){var n=e.secret,t=(0,o.useStripe)(),h=(0,m.s0)(),Z=(0,g.E)(),v=(0,d.I0)(),b=(0,d.v9)(l.HF),P=(0,a.useState)(!1),k=(0,s.Z)(P,2),S=k[0],F=k[1],U=(0,a.useState)(!1),D=(0,s.Z)(U,2),J=D[0],_=D[1],E=(0,d.v9)(x.r7),T=(0,a.useState)(null),z=(0,s.Z)(T,2),I=z[0],M=z[1],O=(0,a.useState)({state:"",message:""}),Q=(0,s.Z)(O,2),X=Q[0],Y=Q[1];if((0,a.useEffect)((function(){t&&n&&!S&&b&&(F(!0),t.retrievePaymentIntent(n).then((function(e){var n=e.paymentIntent;switch(M(n),n.status){case"processing":Y({state:"Processing",message:"Wohoo! Payment received."});break;case"succeeded":Y({state:"Success",message:"Payment processing."});break;case"requires_payment_method":Y({state:"Failed",message:"Payment failes. Please try another payment method"});break;default:Y({state:"Unpaid",message:"Something went wrong. Please try again later."})}})).then((function(){})))}),[t,b]),(0,a.useEffect)((function(){var e;return""===X.state||J||(e=setTimeout((function(){(0,j.OX)(b.uid,(0,r.Z)((0,r.Z)({},E),{},{id:(0,i.Z)()}),{id:I.id,status:I.status,secret:I.client_secret}),v((0,p.M0)()),_(!0)}),1500)),function(){clearTimeout(e)}}),[X]),n)return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.NZ,{children:"Progress Information"}),(0,w.jsxs)(u.F7,{screen:Z,style:{minHeight:"120px"},children:[(0,w.jsxs)(u.sg,{children:[(0,w.jsx)(u.Dx,{children:"Status"}),(0,w.jsx)(u.Fy,{children:X.state})]}),(0,w.jsxs)(u.sg,{children:[(0,w.jsx)(u.Dx,{children:"Transaction ID"}),(0,w.jsx)(u.Fy,{children:"BX1578454AS"})]}),(0,w.jsxs)(u.sg,{children:[(0,w.jsx)(u.Dx,{children:"Payment issued"}),(0,w.jsxs)(u.Fy,{children:[" ",y()().format("MMM Do YYYY, h:mm a")]})]}),"Success"!==X.state&&(0,w.jsx)(u.sg,{justify:"center",children:(0,w.jsx)(f.Z,{})}),(0,w.jsx)(c.KM,{onClick:function(){return h("/")},children:"Back to Homepage"})]})]})};n.default=function(){var e=(0,g.E)(),n=new URLSearchParams(window.location.search).get("payment_intent_client_secret");return(0,w.jsx)(w.Fragment,{children:n?(0,w.jsx)(c.kz,{screen:e,children:(0,w.jsx)(u.OU,{children:(0,w.jsx)(o.Elements,{stripe:b,options:{clientSecret:n},children:(0,w.jsx)(P,{secret:n})})})}):(0,w.jsx)(P,{secret:n})})}},2226:function(e,n,t){t.d(n,{Dx:function(){return m},F7:function(){return x},Fy:function(){return h},OU:function(){return l},sg:function(){return Z}});var r,s,a,i,c,u,o,f=t(168),d=t(7691),p=t(4053),l=d.ZP.div(r||(r=(0,f.Z)(["\n  margin-top: 100px;\n"]))),x=(d.ZP.div(s||(s=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),d.ZP.div(a||(a=(0,f.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  min-height: 160px;\n  flex-direction: row;\n  align-items: space-between;\n  justify-content: flex-start;\n  background-color: #fbf6f6;\n  padding: ",";\n  width: 100%;\n  border-radius: 10px;\n  padding: 15px 25px;\n  gap: 25px;\n  ","\n"])),(function(e){return e.padding||"10px"}),(function(e){var n=e.screen;return("sm"===n||"xs"===n)&&(0,d.iv)(i||(i=(0,f.Z)(["\n      grid-template-columns: 1fr 1fr;\n      "," {\n        font-size: 12px;\n      }\n      "," {\n        font-size: 13px;\n      }\n    "])),m,h)}))),m=(0,d.ZP)(p.RQ)(c||(c=(0,f.Z)(["\n  font-size: 14px;\n  margin-bottom: 5px;\n"]))),h=d.ZP.p(u||(u=(0,f.Z)(["\n  font-size: 15px;\n  font-weight: 500;\n  color: ",";\n"])),p.eE),Z=d.ZP.div(o||(o=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: ",";\n"])),(function(e){return e.justify||"flex-start"}))},2794:function(e,n,t){t.d(n,{OX:function(){return o},XF:function(){return f},xJ:function(){return d}});var r=t(4165),s=t(3433),a=t(1413),i=t(5861),c=t(2481),u=t(673),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i){var o,f,d,p,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,c.hJ)(u.db,"users"),f=(0,c.JU)(u.db,"users",n),e.next=4,(0,c.QT)(f);case 4:if(d=e.sent,t=(0,a.Z)((0,a.Z)({},t),{},{createdAt:c.EK.fromDate(new Date),payment:i}),!d.exists()){e.next=12;break}return p=d.data(),l=p.orders,e.next=10,(0,c.pl)((0,c.JU)(o,n),(0,a.Z)((0,a.Z)({},d.data()),{},{orders:[].concat((0,s.Z)(l),[t])}));case 10:e.next=14;break;case 12:return e.next=14,(0,c.pl)((0,c.JU)(o,n),(0,a.Z)((0,a.Z)({},d.data()),{},{orders:[t]}));case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),f=function(e){return new Promise(function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t,s){var a,i,o,f;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=(0,c.JU)(u.db,"users",e),n.next=4,(0,c.QT)(a);case 4:(i=n.sent).exists()?(o=i.data(),f=o.orders,t(f)):t([]),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),s(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}())},d=function(e,n){return new Promise(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(s,a){var i,o,f,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=(0,c.JU)(u.db,"users",e),t.next=4,(0,c.QT)(i);case 4:(o=t.sent).exists()?(f=o.data(),d=f.orders,p=d.find((function(e){return e.id===n})),s(p)):s([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}}]);
//# sourceMappingURL=354.85f1ed58.chunk.js.map