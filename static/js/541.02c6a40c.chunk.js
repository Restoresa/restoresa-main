"use strict";(self.webpackChunkrestoresa_app=self.webpackChunkrestoresa_app||[]).push([[541,354],{7993:function(n,e,t){t.d(e,{Z:function(){return p}});t(2791);var r,s=t(5238),i=t(4053),a=t(9434),c=t(9699),o=t(2226),u=t(168),d=t(7691).ZP.div(r||(r=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n"]))),l=t(432),x=t(8484),f=t(184);var p=function(){var n=(0,s.E)(),e=(0,a.v9)(x.HF);return(0,f.jsxs)("div",{style:(0,l.U)(n,"md")?{width:"100%"}:{flex:.4},children:[(0,f.jsx)(i.NZ,{style:{marginBottom:"10px"},children:"Customer Information"}),(0,f.jsx)(o.F7,{screen:n,children:e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(d,{children:[(0,f.jsxs)(o.sg,{children:[(0,f.jsx)(o.Dx,{children:"Full Name"}),(0,f.jsx)(o.Fy,{children:null===e||void 0===e?void 0:e.fullName})]}),(0,f.jsxs)(o.sg,{children:[(0,f.jsx)(o.Dx,{children:"Email"}),(0,f.jsx)(o.Fy,{children:e.email})]})]}),(0,f.jsxs)(o.sg,{justify:"flex-start",children:[(0,f.jsx)(o.Dx,{children:"Phone Number"}),(0,f.jsxs)(o.Fy,{children:[e.phoneNumber||"Not specified"," "]})]})]}):(0,f.jsx)(c.Z,{})})]})}},3354:function(n,e,t){t.r(e);var r=t(1413),s=t(9439),i=t(2791),a=t(4261),c=t(4053),o=t(2226),u=t(5764),d=t(9699),l=t(9434),x=t(5960),f=t(8484),p=t(6162),h=t(7689),m=t(3197),j=t(3473),Z=t(5238),g=t(2426),v=t.n(g),y=t(2794),b=t(184),w=(0,j.J)(m.Z.StripePublishableKey),P=function(n){var e=n.secret,t=(0,u.useStripe)(),m=(0,h.s0)(),j=(0,Z.E)(),g=(0,l.I0)(),w=(0,l.v9)(f.HF),P=(0,i.useState)(!1),k=(0,s.Z)(P,2),S=k[0],F=k[1],E=(0,i.useState)(!1),U=(0,s.Z)(E,2),D=U[0],N=U[1],z=(0,l.v9)(p.r7),_=(0,i.useState)(null),J=(0,s.Z)(_,2),Q=J[0],R=J[1],T=(0,i.useState)({state:"",message:""}),I=(0,s.Z)(T,2),C=I[0],K=I[1];if((0,i.useEffect)((function(){t&&e&&!S&&w&&(F(!0),t.retrievePaymentIntent(e).then((function(n){var e=n.paymentIntent;switch(R(e),e.status){case"processing":K({state:"Processing",message:"Wohoo! Payment received."});break;case"succeeded":K({state:"Success",message:"Payment processing."});break;case"requires_payment_method":K({state:"Failed",message:"Payment failes. Please try another payment method"});break;default:K({state:"Unpaid",message:"Something went wrong. Please try again later."})}})).then((function(){})))}),[t,w]),(0,i.useEffect)((function(){var n;return""===C.state||D||(n=setTimeout((function(){(0,y.OX)(w.uid,(0,r.Z)((0,r.Z)({},z),{},{id:(0,a.Z)()}),{id:Q.id,status:Q.status,secret:Q.client_secret}),g((0,x.M0)()),N(!0)}),1500)),function(){clearTimeout(n)}}),[C]),e)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.NZ,{children:"Progress Information"}),(0,b.jsxs)(o.F7,{screen:j,style:{minHeight:"120px"},children:[(0,b.jsxs)(o.sg,{children:[(0,b.jsx)(o.Dx,{children:"Status"}),(0,b.jsx)(o.Fy,{children:C.state})]}),(0,b.jsxs)(o.sg,{children:[(0,b.jsx)(o.Dx,{children:"Transaction ID"}),(0,b.jsx)(o.Fy,{children:"BX1578454AS"})]}),(0,b.jsxs)(o.sg,{children:[(0,b.jsx)(o.Dx,{children:"Payment issued"}),(0,b.jsxs)(o.Fy,{children:[" ",v()().format("MMM Do YYYY, h:mm a")]})]}),"Success"!==C.state&&(0,b.jsx)(o.sg,{justify:"center",children:(0,b.jsx)(d.Z,{})}),(0,b.jsx)(c.KM,{onClick:function(){return m("/")},children:"Back to Homepage"})]})]})};e.default=function(){var n=(0,Z.E)(),e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");return(0,b.jsx)(b.Fragment,{children:e?(0,b.jsx)(c.kz,{screen:n,children:(0,b.jsx)(o.OU,{children:(0,b.jsx)(u.Elements,{stripe:w,options:{clientSecret:e},children:(0,b.jsx)(P,{secret:e})})})}):(0,b.jsx)(P,{secret:e})})}},2226:function(n,e,t){t.d(e,{Dx:function(){return h},F7:function(){return p},Fy:function(){return m},OU:function(){return f},sg:function(){return j}});var r,s,i,a,c,o,u,d=t(168),l=t(7691),x=t(4053),f=l.ZP.div(r||(r=(0,d.Z)(["\n  margin-top: 100px;\n"]))),p=(l.ZP.div(s||(s=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),l.ZP.div(i||(i=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  min-height: 160px;\n  flex-direction: row;\n  align-items: space-between;\n  justify-content: flex-start;\n  background-color: #fbf6f6;\n  padding: ",";\n  width: 100%;\n  border-radius: 10px;\n  padding: 15px 25px;\n  gap: 25px;\n  ","\n"])),(function(n){return n.padding||"10px"}),(function(n){var e=n.screen;return("sm"===e||"xs"===e)&&(0,l.iv)(a||(a=(0,d.Z)(["\n      grid-template-columns: 1fr 1fr;\n      "," {\n        font-size: 12px;\n      }\n      "," {\n        font-size: 13px;\n      }\n    "])),h,m)}))),h=(0,l.ZP)(x.RQ)(c||(c=(0,d.Z)(["\n  font-size: 14px;\n  margin-bottom: 5px;\n"]))),m=l.ZP.p(o||(o=(0,d.Z)(["\n  font-size: 15px;\n  font-weight: 500;\n  color: ",";\n"])),x.eE),j=l.ZP.div(u||(u=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: ",";\n"])),(function(n){return n.justify||"flex-start"}))},2541:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var r,s,i,a,c,o,u,d,l,x,f,p,h,m=t(9439),j=t(2791),Z=t(4165),g=t(5861),v=t(5764),y=t(1804),b=t(4053),w=t(168),P=t(7691),k=P.ZP.div(r||(r=(0,w.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: space-between;\n  justify-content: flex-start;\n  background-color: #fbf6f6;\n  padding: ",";\n  width: 100%;\n  border-radius: 10px;\n  padding: 15px 25px;\n  gap: 25px;\n  height: max-content;\n"])),(function(n){return n.padding||"10px"})),S=P.ZP.div(s||(s=(0,w.Z)(["\n  width: 100%;\n  border: 1px solid #e4e4e4;\n  height: 1px;\n"]))),F=P.ZP.h1(i||(i=(0,w.Z)(["\n  font-weight: 500;\n  color: ",";\n  font-size: 16px;\n"])),b.eE),E=P.ZP.h1(a||(a=(0,w.Z)(["\n  font-weight: 600;\n  color: ",";\n  font-size: 16px;\n"])),b.eE),U=P.ZP.div(c||(c=(0,w.Z)(["\n  width: 250px;\n  margin-left: auto;\n"]))),D=t(184),N=function(n){var e=n.price,t=(0,v.useStripe)(),r=(0,v.useElements)(),s=function(){var n=(0,g.Z)((0,Z.Z)().mark((function n(e){var s,i;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),n.prev=1,t&&r){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,t.confirmPayment({elements:r,confirmParams:{return_url:"".concat(window.location.origin,"/payment-status")}});case 6:s=n.sent,(i=s.error)&&y.Z.alert(i.message),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(1);case 13:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}();return(0,D.jsx)("div",{style:{width:"100%"},children:(0,D.jsxs)("form",{children:[(0,D.jsx)(v.PaymentElement,{}),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(S,{}),(0,D.jsxs)(U,{children:[(0,D.jsxs)(b.Lf,{children:[(0,D.jsx)(F,{children:"Total"}),(0,D.jsxs)(E,{children:[e,"\u20ac"]})]}),(0,D.jsx)(b.KM,{onClick:s,children:"Pay"})]})]})]})})},z=function(n){var e=n.price,t=n.clientSecret;return(0,D.jsx)(D.Fragment,{children:t&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b.NZ,{children:"Payment information"}),(0,D.jsx)(k,{children:(0,D.jsx)(N,{price:[e]})})]})})},_=t(3473),J=t(3314),Q=t(4708),R=t(7993),T=t(9434),I=t(6162),C=t(5238),K=t(5294),M=P.ZP.div(o||(o=(0,w.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),B=(P.ZP.div(u||(u=(0,w.Z)(["\n  display: flex;\n  flex-direction: fow;\n  align-items: space-between;\n  justify-content: flex-start;\n  background-color: #fbf6f6;\n  padding: ",";\n  width: 100%;\n  border-radius: 10px;\n  padding: 15px 25px;\n  gap: 25px;\n  ","\n"])),(function(n){return n.padding||"10px"}),(function(n){var e=n.screen;return("sm"===e||"xs"===e)&&(0,P.iv)(d||(d=(0,w.Z)(["\n      "," {\n        font-size: 12px;\n      }\n      "," {\n        font-size: 13px;\n      }\n    "])),B,H)})),P.ZP.div(l||(l=(0,w.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),(0,P.ZP)(b.RQ)(x||(x=(0,w.Z)(["\n  font-size: 14px;\n  margin-bottom: 5px;\n"])))),H=P.ZP.p(f||(f=(0,w.Z)(["\n  font-size: 15px;\n  font-weight: 500;\n  color: ",";\n"])),b.eE),L=(0,P.ZP)(b.Lf)(p||(p=(0,w.Z)(["\n  ","\n"])),(function(n){var e=n.screen;return("sm"===e||"xs"===e)&&(0,P.iv)(h||(h=(0,w.Z)(["\n      flex-direction: column;\n      width: 100%;\n    "])))})),Y=(0,t(3553).P1)([function(n){return n.payment}],(function(n){return n.price})),O=t(3354),X=t(3197),G=t(9699),A=(0,_.J)(X.Z.StripePublishableKey);var q=function(){var n={seats:(0,T.v9)(I.Ud),date:(0,T.v9)(I.iY),hour:(0,T.v9)(I.rn)},e=(0,T.v9)(I.L7),t=(0,T.v9)(I.gK),r=(0,T.v9)(Y),s=(0,j.useState)(0),i=(0,m.Z)(s,2),a=i[0],c=i[1],o=(0,j.useState)(!1),u=(0,m.Z)(o,2),d=u[0],l=u[1],x=(0,T.v9)(I.R1),f=(0,C.E)(),p=(0,j.useState)(void 0),h=(0,m.Z)(p,2),Z=h[0],g=h[1];return console.log(x),(0,j.useEffect)((function(){Number(t)>0?c(Number(t)):Number(r)>0&&c(Number(r))}),[t,r]),(0,j.useEffect)((function(){Number(a)>0&&!d&&(K.Z.post("".concat(X.Z.BackendEndPoint,"/get-payment-intent"),{price:a},{headers:{"Content-Type":"application/json"}}).then((function(n){var e=n.data;return g(e.client_secret)})),l(!0))}),[a]),Z?(0,D.jsx)(J.Z,{style:{padding:"100px 0"},children:(0,D.jsx)(M,{children:(0,D.jsxs)(v.Elements,{stripe:A,options:{clientSecret:Z},children:[(0,D.jsx)(O.default,{}),a?(0,D.jsx)(z,{price:a,clientSecret:Z}):null,(0,D.jsxs)(L,{gap:"20px",screen:f,children:[(0,D.jsx)(R.Z,{}),(0,D.jsx)(Q.Z,{restaurant:e,reservationData:n})]})]})})}):(0,D.jsx)(J.Z,{children:(0,D.jsx)(b.uH,{children:(0,D.jsx)(G.Z,{})})})}},4708:function(n,e,t){t.d(e,{Z:function(){return p}});t(2791);var r,s,i=t(4053),a=t(168),c=t(7691),o=c.ZP.img(r||(r=(0,a.Z)(["\n  height: 80px;\n  width: 100px;\n  object-fit: cover;\n  border-radius: 10px;\n"]))),u=(0,c.ZP)(i.Lf)(s||(s=(0,a.Z)(["\n  justify-content: flex-start;\n  padding: 0;\n  gap: ",";\n"])),(function(n){return n.gap})),d=t(432),l=t(5238),x=t(9699),f=t(184);var p=function(n){var e=n.restaurant,t=n.reservationData,r=(0,l.E)(),s=t.seats,a=t.date,c=t.hour;return(0,f.jsxs)("div",{style:(0,d.U)(r,"md")?{width:"100%"}:{flex:.6},children:[(0,f.jsx)(i.NZ,{style:{marginBottom:"10px"},children:"Restaurant information"}),(0,f.jsx)(i.F7,{children:e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(u,{gap:"15px",children:[(0,f.jsx)(o,{src:e.imageUrl}),(0,f.jsxs)(i.lU,{justify:"space-between",children:[(0,f.jsx)(i.I9,{children:e.title}),(0,f.jsx)(i.RQ,{children:e.description})]})]}),(0,f.jsxs)(u,{gap:"15px",children:[(0,f.jsxs)(i.lU,{placeGap:"10px",justify:"space-between",children:[(0,f.jsx)(i.uS,{children:"Seats"}),(0,f.jsx)(i.RQ,{children:s})]}),(0,f.jsxs)(i.lU,{placeGap:"10px",justify:"space-between",children:[(0,f.jsx)(i.uS,{children:"Date"}),(0,f.jsx)(i.RQ,{children:a})]}),(0,f.jsxs)(i.lU,{placeGap:"10px",justify:"space-between",children:[(0,f.jsx)(i.uS,{children:"Time"}),(0,f.jsxs)(i.RQ,{children:[c.hour,":",c.minute,"0"]})]})]})]}):(0,f.jsx)(x.Z,{})})]})}},2794:function(n,e,t){t.d(e,{OX:function(){return u},XF:function(){return d},xJ:function(){return l}});var r=t(4165),s=t(3433),i=t(1413),a=t(5861),c=t(2481),o=t(673),u=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,t,a){var u,d,l,x,f;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=(0,c.hJ)(o.db,"users"),d=(0,c.JU)(o.db,"users",e),n.next=4,(0,c.QT)(d);case 4:if(l=n.sent,t=(0,i.Z)((0,i.Z)({},t),{},{createdAt:c.EK.fromDate(new Date),payment:a}),!l.exists()){n.next=12;break}return x=l.data(),f=x.orders,n.next=10,(0,c.pl)((0,c.JU)(u,e),(0,i.Z)((0,i.Z)({},l.data()),{},{orders:[].concat((0,s.Z)(f),[t])}));case 10:n.next=14;break;case 12:return n.next=14,(0,c.pl)((0,c.JU)(u,e),(0,i.Z)((0,i.Z)({},l.data()),{},{orders:[t]}));case 14:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),d=function(n){return new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,s){var i,a,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,c.JU)(o.db,"users",n),e.next=4,(0,c.QT)(i);case 4:(a=e.sent).exists()?(u=a.data(),d=u.orders,t(d)):t([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}())},l=function(n,e){return new Promise(function(){var t=(0,a.Z)((0,r.Z)().mark((function t(s,i){var a,u,d,l,x;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=(0,c.JU)(o.db,"users",n),t.next=4,(0,c.QT)(a);case 4:(u=t.sent).exists()?(d=u.data(),l=d.orders,x=l.find((function(n){return n.id===e})),s(x)):s([]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(n,e){return t.apply(this,arguments)}}())}}}]);
//# sourceMappingURL=541.02c6a40c.chunk.js.map